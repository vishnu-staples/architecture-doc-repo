{
  "feedName": "s3-to-sftp-virus-scan",
  "version": "1.0",
  "_comment": "Note: DeleteFile is not supported for AmazonS3 source type",
  "source": {
    "name": "Amazon S3",
    "type": "AmazonS3",
    "bucketName": "incoming-files",
    "region": "us-east-1",
    "path": "uploads",
    "credentials": {
      "accessKey": "{@JobSecrets.s3AccessKey}",
      "secretKey": "{@JobSecrets.s3SecretKey}"
    }
  },
  "destinations": [
    {
      "id": 1,
      "name": "Internal SFTP Server",
      "type": "Internal-SFTP",
      "path": "{@AppSettings.sftpintroot}/{@Message.accountID}/incoming"
    }
  ],
  "actions": [
    {
      "id": 1,
      "type": "ReadFile",
      "sourceFile": "{@JobSettings.source.path}/{@Message.fileName}"
    },
    {
      "id": 2,
      "type": "Scan",
      "sourceStream": "{@JobSettings.actions.1.outputStream}"
    },
    {
      "id": 3,
      "type": "WriteFile",
      "sourceStream": "{@JobSettings.actions.2.outputStream}",
      "outputFile": "{@JobSettings.destinations.1.path}/{@Message.fileName}"
    }
  ]
}
